!function(a,b){"use strict";"object"==typeof module?module.exports=b(require("medium-editor")):"function"==typeof define&&define.amd?define(["medium-editor"],b):a.MediumEditorMultiPlaceholders=b(a.MediumEditor)}(this,function(a){"use strict";var b=a.Extension.extend({name:"multi_placeholder",init:function(){this.updateAllPlaceholders(),this.watchChanges()},destroy:function(){this.getEditorElements().forEach(function(a){var b=[].slice.call(a.querySelectorAll("[data-placeholder]"));b.map(function(a){a.remove()},this)},this)},updateAllPlaceholders:function(){this.getEditorElements().forEach(function(a){for(var b=[].slice.call(a.children);b.length<this.placeholders.length;)b.push("fake");b.forEach(function(b,c){var d=this.placeholders[c];if(d)if("fake"!==b)b.tagName.toLowerCase()===d.tag&&(""===b.textContent.trim()?(b.setAttribute("data-placeholder",d.text),b.classList.add("medium-editor-placeholder")):(b.removeAttribute("data-placeholder"),b.classList.remove("medium-editor-placeholder")));else{var e=document.createElement(d.tag);e.innerHTML="<br>",e.setAttribute("data-placeholder",d.text),e.classList.add("medium-editor-placeholder"),a.appendChild(e)}else b.removeAttribute("data-placeholder"),b.classList.remove("medium-editor-placeholder")},this)},this)},handleKeydownEnter:function(a,b){var c=window.getSelection(),d=c.getRangeAt(0).commonAncestorContainer,e=d;if(e.parentNode!=b)for(;e.parentNode&&e.parentNode!=b;)e=e.parentNode;var f=e.nextSibling;if(f&&f.classList.contains("medium-editor-placeholder")&&c.focusOffset>=e.textContent.length){a.preventDefault();var g=document.createRange();g.setStart(f,0),g.collapse(!0),c.removeAllRanges(),c.addRange(g)}},watchChanges:function(){this.subscribe("editableKeydownEnter",this.handleKeydownEnter.bind(this)),this.subscribe("editableInput",this.updateAllPlaceholders.bind(this)),this.subscribe("externalInteraction",this.updateAllPlaceholders.bind(this))}});return b});